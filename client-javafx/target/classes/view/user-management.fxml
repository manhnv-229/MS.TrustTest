<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17" 
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.mstrust.client.admin.controller.UserManagementController"
      spacing="15" styleClass="content-container"
      stylesheets="@../css/admin-styles.css, @../css/teacher-styles.css">
    
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>
    
    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="ðŸ‘¥ Quáº£n lÃ½ NgÆ°á»i dÃ¹ng" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button fx:id="createButton" text="+ Táº¡o má»›i" styleClass="primary-button" 
                onAction="#handleCreate"/>
        <Button fx:id="refreshButton" text="â†» LÃ m má»›i" styleClass="secondary-button" 
                onAction="#handleRefresh"/>
        <Button fx:id="exportButton" text="ðŸ“¤ Xuáº¥t Excel" styleClass="secondary-button"
                onAction="#handleExport"/>
    </HBox>
    
    <!-- Search and Filters Section -->
    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="filter-bar">
        <Label text="TÃ¬m kiáº¿m:"/>
        <TextField fx:id="searchField" promptText="TÃªn, Email, MÃ£ SV..." prefWidth="300"
                   onAction="#handleSearch"/>
        
        <Region HBox.hgrow="ALWAYS"/>
        
        <!-- Role Filter -->
        <VBox spacing="3">
            <Label text="Vai trÃ²" styleClass="filter-label"/>
            <ComboBox fx:id="roleFilter" promptText="Táº¥t cáº£ vai trÃ²" prefWidth="150"
                     onAction="#handleFilterChange"/>
        </VBox>
        
        <!-- Status Filter -->
        <VBox spacing="3">
            <Label text="Tráº¡ng thÃ¡i" styleClass="filter-label"/>
            <ComboBox fx:id="statusFilter" promptText="Táº¥t cáº£" prefWidth="120"
                     onAction="#handleFilterChange"/>
        </VBox>
        
        <Button text="ðŸ” TÃ¬m" styleClass="secondary-button" onAction="#handleSearch"/>
    </HBox>

     <!-- Statistics Bar -->
    <HBox spacing="20" alignment="CENTER_LEFT" styleClass="stats-bar">
        <Label fx:id="totalUsersLabel" text="Tá»•ng sá»‘: 0" styleClass="stat-label"/>
        <Separator orientation="VERTICAL"/>
        <Label fx:id="activeUsersLabel" text="Äang hoáº¡t Ä‘á»™ng: 0" styleClass="stat-label"/>
        <Separator orientation="VERTICAL"/>
        <Label fx:id="inactiveUsersLabel" text="VÃ´ hiá»‡u hÃ³a: 0" styleClass="stat-label"/>
    </HBox>
    <!-- Table Toolbar -->
    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="table-toolbar">
        <Label text="Thao tÃ¡c:" styleClass="toolbar-label"/>
        <Separator orientation="VERTICAL"/>
        <Button fx:id="editButton" text="Sá»­a" styleClass="secondary-button" 
                onAction="#handleEdit" disable="true"/>
        <Button fx:id="deleteButton" text="XÃ³a" styleClass="secondary-button" 
                onAction="#handleDelete" disable="true"/>
        <Button fx:id="activateButton" text="KÃ­ch hoáº¡t" styleClass="secondary-button" 
                onAction="#handleActivate" disable="true"/>
        <Button fx:id="deactivateButton" text="VÃ´ hiá»‡u hÃ³a" styleClass="secondary-button" 
                onAction="#handleDeactivate" disable="true"/>
        <Region HBox.hgrow="ALWAYS"/>
    </HBox>
    <!-- Table View with Loading Overlay -->
    <StackPane VBox.vgrow="ALWAYS">
        <TableView fx:id="usersTable" styleClass="data-table">
            <columns>
                <TableColumn fx:id="nameColumn" text="Há» tÃªn" prefWidth="200"/>
                <TableColumn fx:id="emailColumn" text="Email" prefWidth="200"/>
                <TableColumn fx:id="studentCodeColumn" text="MÃ£ SV" prefWidth="120"/>
                <TableColumn fx:id="roleColumn" text="Vai trÃ²" prefWidth="150"/>
                <TableColumn fx:id="statusColumn" text="Tráº¡ng thÃ¡i" prefWidth="100"/>
                <TableColumn fx:id="departmentColumn" text="Khoa" prefWidth="150"/>
                <TableColumn fx:id="classColumn" text="Lá»›p" prefWidth="120"/>
                <TableColumn fx:id="lastLoginColumn" text="ÄÄƒng nháº­p cuá»‘i" prefWidth="150"/>
            </columns>
        </TableView>
        
        <!-- Loading Overlay -->
        <StackPane fx:id="loadingPane" visible="false" styleClass="loading-overlay">
            <VBox alignment="CENTER" spacing="10">
                <ProgressIndicator styleClass="loading-spinner"/>
                <Label fx:id="loadingMessage" text="Äang táº£i..." styleClass="loading-message"/>
            </VBox>
        </StackPane>
    </StackPane>
    
    <!-- Pagination Bar -->
    <HBox spacing="10" alignment="CENTER" styleClass="pagination-bar">
        <Button fx:id="firstPageButton" text="â® Äáº§u" onAction="#handleFirstPage"/>
        <Button fx:id="prevPageButton" text="â—€ TrÆ°á»›c" onAction="#handlePrevPage"/>
        
        <Label text="Trang"/>
        <Label fx:id="currentPageLabel" text="1" styleClass="page-number"/>
        <Label text="cá»§a"/>
        <Label fx:id="totalPagesLabel" text="1" styleClass="page-number"/>
        
        <Button fx:id="nextPageButton" text="Sau â–¶" onAction="#handleNextPage"/>
        <Button fx:id="lastPageButton" text="Cuá»‘i â­" onAction="#handleLastPage"/>
        
        <Region HBox.hgrow="ALWAYS"/>
        
        <Label text="Hiá»ƒn thá»‹:"/>
        <ComboBox fx:id="pageSizeCombo" prefWidth="80" onAction="#handlePageSizeChange"/>
        <Label text="báº£n ghi/trang"/>
    </HBox>
    
</VBox>

