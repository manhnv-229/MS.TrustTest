<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/17" 
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.mstrust.client.teacher.controller.monitoring.MonitoringDashboardController"
            styleClass="root"
            stylesheets="@../css/monitoring-styles.css">
    
    <!-- Top Bar -->
    <top>
        <VBox spacing="10" styleClass="monitoring-header">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Label text="ðŸ“Š GiÃ¡m sÃ¡t Thi" styleClass="page-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- Exam Selector -->
                <Label text="Äá» thi:"/>
                <ComboBox fx:id="examComboBox" prefWidth="300" promptText="Chá»n Ä‘á» thi..."/>
                
                <Button fx:id="refreshButton" text="LÃ m má»›i" onAction="#handleRefresh"/>
            </HBox>
            
            <!-- Status Bar -->
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Label fx:id="statusLabel" text="Tráº¡ng thÃ¡i: ChÆ°a chá»n Ä‘á» thi" styleClass="status-label"/>
                <Separator orientation="VERTICAL"/>
                <Label fx:id="studentsCountLabel" text="Sá»‘ há»c sinh: 0" styleClass="info-label"/>
                <Separator orientation="VERTICAL"/>
                <Label fx:id="alertsCountLabel" text="Cáº£nh bÃ¡o: 0" styleClass="info-label"/>
            </HBox>
        </VBox>
    </top>
    
    <!-- Main Content -->
    <center>
        <SplitPane dividerPositions="0.7" styleClass="main-split">
            
            <!-- Left: Students Table -->
            <VBox spacing="10" styleClass="students-section">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>
                
                <Label text="Danh sÃ¡ch Há»c sinh" styleClass="section-title"/>
                
                <!-- Students TableView -->
                <TableView fx:id="studentsTable" styleClass="students-table" prefHeight="600">
                    <columns>
                        <TableColumn fx:id="studentNameColumn" text="Há» tÃªn" prefWidth="200">
                            <cellValueFactory>
                                <PropertyValueFactory property="studentName"/>
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="studentCodeColumn" text="MÃ£ SV" prefWidth="120">
                            <cellValueFactory>
                                <PropertyValueFactory property="studentCode"/>
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="statusColumn" text="Tráº¡ng thÃ¡i" prefWidth="100">
                            <cellValueFactory>
                                <PropertyValueFactory property="status"/>
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="alertsCountColumn" text="Cáº£nh bÃ¡o" prefWidth="80">
                            <cellValueFactory>
                                <PropertyValueFactory property="alertsCount"/>
                            </cellValueFactory>
                        </TableColumn>
                    </columns>
                </TableView>
                
                <!-- Loading/Empty State -->
                <VBox fx:id="emptyStatePane" alignment="CENTER" spacing="10" visible="true">
                    <Label text="ChÆ°a cÃ³ dá»¯ liá»‡u" styleClass="empty-state-label"/>
                    <Text text="Vui lÃ²ng chá»n má»™t Ä‘á» thi Ä‘á»ƒ xem giÃ¡m sÃ¡t" 
                          styleClass="empty-state-text" 
                          wrappingWidth="400"/>
                </VBox>
            </VBox>
            
            <!-- Right: Alert Feed -->
            <VBox spacing="10" styleClass="alerts-section">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>
                
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="Cáº£nh bÃ¡o Real-time" styleClass="section-title"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="clearAlertsButton" text="XÃ³a táº¥t cáº£" onAction="#handleClearAlerts"/>
                </HBox>
                
                <!-- Alert Feed -->
                <ListView fx:id="alertsList" styleClass="alerts-list" prefHeight="600" VBox.vgrow="ALWAYS"/>
                
                <!-- Empty Alerts State -->
                <VBox fx:id="emptyAlertsPane" alignment="CENTER" spacing="10" visible="true">
                    <Label text="ChÆ°a cÃ³ cáº£nh bÃ¡o" styleClass="empty-state-label"/>
                    <Text text="CÃ¡c cáº£nh bÃ¡o sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y khi phÃ¡t hiá»‡n hoáº¡t Ä‘á»™ng Ä‘Ã¡ng ngá»" 
                          styleClass="empty-state-text" 
                          wrappingWidth="300"/>
                </VBox>
            </VBox>
            
        </SplitPane>
    </center>
    
    <!-- Bottom: Quick Actions -->
    <bottom>
        <HBox styleClass="actions-bar" alignment="CENTER_LEFT" spacing="15">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>
            
            <Button fx:id="viewAllScreenshotsButton" text="Xem táº¥t cáº£ Screenshots" onAction="#handleViewAllScreenshots"/>
            <Button fx:id="viewActivityLogsButton" text="Xem Activity Logs" onAction="#handleViewActivityLogs"/>
            <Button fx:id="exportReportButton" text="Xuáº¥t bÃ¡o cÃ¡o" onAction="#handleExportReport"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <Label text="Cáº­p nháº­t tá»± Ä‘á»™ng má»—i 10 giÃ¢y" styleClass="auto-refresh-label"/>
        </HBox>
    </bottom>
    
</BorderPane>

