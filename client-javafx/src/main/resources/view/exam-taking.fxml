<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<!--
  exam-taking.fxml - Giao diá»‡n mÃ n hÃ¬nh lÃ m bÃ i thi
  Layout: BorderPane vá»›i Timer á»Ÿ top, Palette á»Ÿ left, Question display á»Ÿ center, Navigation á»Ÿ bottom
  Author: K24DTCN210-NVMANH (23/11/2025 12:22)
-->

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.mstrust.client.exam.controller.ExamTakingController"
            stylesheets="@../css/exam-common.css"
            styleClass="exam-taking-root">
    
    <!-- TOP: Header vá»›i Timer vÃ  Student Info -->
    <top>
        <VBox styleClass="exam-header">
            <!-- Main header bar -->
            <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header-bar">
                <padding>
                    <Insets top="15" right="20" bottom="15" left="20"/>
                </padding>
                
                <!-- Exam title -->
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label fx:id="examTitleLabel" text="Äang táº£i..." styleClass="exam-title"/>
                    <Label fx:id="examSubtitleLabel" text="MÃ´n há»c | Thá»i gian" styleClass="exam-subtitle"/>
                </VBox>
                
                <!-- Timer component (will be injected programmatically) -->
                <VBox fx:id="timerContainer" alignment="CENTER" styleClass="timer-container">
                    <padding>
                        <Insets top="5" right="10" bottom="5" left="10"/>
                    </padding>
                </VBox>
                
                <!-- Student info -->
                <VBox spacing="5" alignment="CENTER_RIGHT">
                    <Label fx:id="studentNameLabel" text="Sinh viÃªn" styleClass="student-name"/>
                    <Label fx:id="studentCodeLabel" text="MSV" styleClass="student-code"/>
                </VBox>
                
                <!-- Submit button -->
                <Button fx:id="submitButton" 
                        text="Ná»™p bÃ i" 
                        onAction="#onSubmit"
                        styleClass="submit-button">
                    <tooltip>
                        <Tooltip text="Ná»™p bÃ i thi (Ctrl+Enter)"/>
                    </tooltip>
                </Button>
            </HBox>
            
            <!-- Progress bar -->
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="progress-bar-container">
                <padding>
                    <Insets top="10" right="20" bottom="10" left="20"/>
                </padding>
                
                <Label text="Tiáº¿n Ä‘á»™:" styleClass="progress-label"/>
                <ProgressBar fx:id="progressBar" progress="0.0" prefWidth="200" styleClass="exam-progress"/>
                <Label fx:id="progressLabel" text="0/0 cÃ¢u" styleClass="progress-text"/>
            </HBox>
        </VBox>
    </top>
    
    <!-- LEFT: Question Palette -->
    <left>
        <VBox styleClass="palette-sidebar">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            
            <!-- Palette container (QuestionPaletteComponent will be injected here) -->
            <VBox fx:id="paletteContainer" VBox.vgrow="ALWAYS"/>
            
            <!-- Statistics -->
            <VBox spacing="8" styleClass="statistics-box">
                <padding>
                    <Insets top="15" right="10" bottom="10" left="10"/>
                </padding>
                
                <Label text="Thá»‘ng kÃª:" styleClass="statistics-title"/>
                
                <HBox spacing="5">
                    <Label text="ÄÃ£ tráº£ lá»i:" styleClass="stat-label"/>
                    <Label fx:id="answeredCountLabel" text="0" styleClass="stat-value-success"/>
                </HBox>
                
                <HBox spacing="5">
                    <Label text="ÄÃ¡nh dáº¥u:" styleClass="stat-label"/>
                    <Label fx:id="markedCountLabel" text="0" styleClass="stat-value-warning"/>
                </HBox>
                
                <HBox spacing="5">
                    <Label text="ChÆ°a lÃ m:" styleClass="stat-label"/>
                    <Label fx:id="unansweredCountLabel" text="0" styleClass="stat-value-danger"/>
                </HBox>
            </VBox>
        </VBox>
    </left>
    
    <!-- CENTER: Question Display -->
    <center>
        <VBox styleClass="question-display-area">
            <!-- Question display container (QuestionDisplayComponent will be injected here) -->
            <VBox fx:id="questionDisplayContainer" VBox.vgrow="ALWAYS">
                <padding>
                    <Insets top="10" right="10" bottom="10" left="10"/>
                </padding>
            </VBox>
        </VBox>
    </center>
    
    <!-- BOTTOM: Navigation Buttons -->
    <bottom>
        <VBox styleClass="navigation-bar">
            <!-- Navigation buttons -->
            <HBox alignment="CENTER" spacing="15" styleClass="nav-buttons-container">
                <padding>
                    <Insets top="15" right="20" bottom="15" left="20"/>
                </padding>
                
                <!-- Previous button -->
                <Button fx:id="previousButton" 
                        text="â—€ CÃ¢u trÆ°á»›c" 
                        onAction="#onPrevious"
                        styleClass="nav-button-secondary">
                    <tooltip>
                        <Tooltip text="Quay láº¡i cÃ¢u trÆ°á»›c (Ctrl+Left)"/>
                    </tooltip>
                </Button>
                
                <!-- Spacer -->
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- Question number input -->
                <HBox spacing="10" alignment="CENTER">
                    <Label text="Äi tá»›i cÃ¢u:" styleClass="jump-label"/>
                    <TextField fx:id="jumpToQuestionField" 
                              promptText="Sá»‘ cÃ¢u"
                              prefWidth="80"
                              styleClass="jump-field"/>
                    <Button text="Äi tá»›i" 
                           onAction="#onJumpToQuestion"
                           styleClass="nav-button-secondary"/>
                </HBox>
                
                <!-- Spacer -->
                <Region HBox.hgrow="ALWAYS"/>
                
                <!-- Save button -->
                <Button fx:id="saveButton" 
                        text="ðŸ’¾ LÆ°u cÃ¢u tráº£ lá»i" 
                        onAction="#onSave"
                        styleClass="save-button">
                    <tooltip>
                        <Tooltip text="LÆ°u cÃ¢u tráº£ lá»i hiá»‡n táº¡i (Ctrl+S)"/>
                    </tooltip>
                </Button>
                
                <!-- Next button -->
                <Button fx:id="nextButton" 
                        text="CÃ¢u tiáº¿p â–¶" 
                        onAction="#onNext"
                        styleClass="nav-button-primary">
                    <tooltip>
                        <Tooltip text="Tiáº¿p tá»¥c cÃ¢u sau (Ctrl+Right)"/>
                    </tooltip>
                </Button>
            </HBox>
            
            <!-- Status bar -->
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="status-bar">
                <padding>
                    <Insets top="8" right="20" bottom="8" left="20"/>
                </padding>
                
                <Label text="â—" styleClass="status-indicator"/>
                <Label fx:id="statusLabel" text="Sáºµn sÃ ng" styleClass="status-text"/>
                
                <Region HBox.hgrow="ALWAYS"/>
                
                <Label fx:id="lastSaveLabel" text="ChÆ°a lÆ°u" styleClass="last-save-text"/>
            </HBox>
        </VBox>
    </bottom>
    
</BorderPane>
