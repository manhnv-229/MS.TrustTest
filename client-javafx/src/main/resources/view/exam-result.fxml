<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<!--
    Exam Result Screen FXML
    - Hiá»ƒn thá»‹ káº¿t quáº£ bÃ i thi sau khi submit
    - Há»— trá»£ 2 tráº¡ng thÃ¡i: Grading in progress / Graded
    - Hiá»ƒn thá»‹ Ä‘iá»ƒm, grade, chi tiáº¿t tá»«ng cÃ¢u
    Author: K24DTCN210-NVMANH (23/11/2025 18:53)
-->

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.mstrust.client.exam.controller.ExamResultController"
            styleClass="exam-result-container"
            stylesheets="@../css/exam-common.css">
    
    <!-- TOP: Header with exam title -->
    <top>
        <VBox styleClass="result-header" spacing="10">
            <padding>
                <Insets top="20" right="30" bottom="20" left="30"/>
            </padding>
            
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Label text="ðŸ“Š" style="-fx-font-size: 32px;"/>
                <VBox spacing="5">
                    <Label fx:id="examTitleLabel" 
                           text="Káº¿t Quáº£ BÃ i Thi" 
                           styleClass="exam-title"/>
                    <Label fx:id="submissionTimeLabel" 
                           text="Ná»™p bÃ i lÃºc: --:--:--" 
                           styleClass="submission-time"/>
                </VBox>
            </HBox>
        </VBox>
    </top>
    
    <!-- CENTER: Result content -->
    <center>
        <ScrollPane fitToWidth="true" 
                    fitToHeight="true" 
                    styleClass="result-scroll">
            <!-- Use StackPane to center content horizontally -->
            <StackPane styleClass="result-content-wrapper">
                <padding>
                    <Insets top="20" right="30" bottom="20" left="30"/>
                </padding>
            
                <VBox spacing="20" maxWidth="900" styleClass="result-content" alignment="TOP_LEFT">
                
                <!-- Submission Status Card -->
                <VBox styleClass="result-card" spacing="15">
                    <Label text="ðŸ“‹ Tráº¡ng ThÃ¡i Ná»™p BÃ i" styleClass="card-title"/>
                    
                    <GridPane hgap="20" vgap="10" styleClass="info-grid">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="30" />
                            <ColumnConstraints percentWidth="70" />
                        </columnConstraints>
                        
                        <Label text="Submission ID:" GridPane.rowIndex="0" GridPane.columnIndex="0" 
                               styleClass="info-label"/>
                        <Label fx:id="submissionIdLabel" text="--" GridPane.rowIndex="0" GridPane.columnIndex="1"
                               styleClass="info-value"/>
                        
                        <Label text="Tráº¡ng thÃ¡i:" GridPane.rowIndex="1" GridPane.columnIndex="0"
                               styleClass="info-label"/>
                        <Label fx:id="statusLabel" text="ÄÃ£ ná»™p thÃ nh cÃ´ng âœ“" GridPane.rowIndex="1" GridPane.columnIndex="1"
                               styleClass="info-value status-submitted"/>
                        
                        <Label text="Thá»i gian ná»™p:" GridPane.rowIndex="2" GridPane.columnIndex="0"
                               styleClass="info-label"/>
                        <Label fx:id="submitTimeDetailLabel" text="--" GridPane.rowIndex="2" GridPane.columnIndex="1"
                               styleClass="info-value"/>
                    </GridPane>
                </VBox>
                
                <!-- Grading Status Card -->
                <VBox fx:id="gradingStatusCard" styleClass="result-card" spacing="15">
                    <Label text="ðŸŽ¯ Tráº¡ng ThÃ¡i Cháº¥m Äiá»ƒm" styleClass="card-title"/>
                    
                    <!-- Show when grading in progress -->
                    <VBox fx:id="gradingInProgressContainer" spacing="10" managed="false" visible="false">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <ProgressIndicator prefWidth="30" prefHeight="30"/>
                            <Label text="Äang chá» giÃ¡o viÃªn cháº¥m Ä‘iá»ƒm..." styleClass="grading-status"/>
                        </HBox>
                        <Label text="Káº¿t quáº£ sáº½ Ä‘Æ°á»£c cáº­p nháº­t sau khi giÃ¡o viÃªn hoÃ n táº¥t cháº¥m Ä‘iá»ƒm." 
                               styleClass="grading-note" wrapText="true"/>
                    </VBox>
                    
                    <!-- Show when graded -->
                    <VBox fx:id="gradedContainer" spacing="15" managed="false" visible="false">
                        <HBox spacing="30" alignment="CENTER_LEFT">
                            <VBox spacing="5" alignment="CENTER" styleClass="score-box">
                                <Label text="Äiá»ƒm sá»‘" styleClass="score-label"/>
                                <HBox spacing="5" alignment="BASELINE_CENTER">
                                    <Label fx:id="scoreLabel" text="0.0" styleClass="score-value"/>
                                    <Label text="/" styleClass="score-separator"/>
                                    <Label fx:id="maxScoreLabel" text="10.0" styleClass="score-max"/>
                                </HBox>
                            </VBox>
                            
                            <VBox spacing="5" alignment="CENTER" styleClass="percentage-box">
                                <Label text="Pháº§n trÄƒm" styleClass="percentage-label"/>
                                <Label fx:id="percentageLabel" text="0%" styleClass="percentage-value"/>
                            </VBox>
                            
                            <VBox spacing="5" alignment="CENTER" styleClass="grade-box">
                                <Label text="Xáº¿p loáº¡i" styleClass="grade-label"/>
                                <Label fx:id="gradeLabel" text="F" styleClass="grade-value"/>
                            </VBox>
                        </HBox>
                    </VBox>
                </VBox>
                
                <!-- Question Results Card (only show when graded) -->
                <VBox fx:id="questionResultsCard" styleClass="result-card" spacing="15" 
                      managed="false" visible="false">
                    <Label text="ðŸ“ Káº¿t Quáº£ Chi Tiáº¿t" styleClass="card-title"/>
                    
                    <VBox fx:id="questionResultsContainer" spacing="10">
                        <!-- Question results will be added programmatically -->
                    </VBox>
                </VBox>
                
                </VBox>
                
            </StackPane>
        </ScrollPane>
    </center>
    
    <!-- BOTTOM: Action buttons -->
    <bottom>
        <HBox styleClass="result-footer" spacing="15" alignment="CENTER_RIGHT">
            <padding>
                <Insets top="15" right="30" bottom="15" left="30"/>
            </padding>
            
            <Button fx:id="backToListButton" 
                    text="Quay Láº¡i Danh SÃ¡ch Äá» Thi" 
                    styleClass="btn-primary"
                    onAction="#onBackToExamList"
                    prefWidth="200"/>
        </HBox>
    </bottom>
    
</BorderPane>
