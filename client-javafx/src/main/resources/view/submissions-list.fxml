<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.mstrust.client.teacher.controller.grading.SubmissionsListController"
      spacing="15" styleClass="content-container"
      stylesheets="@../css/exam-common.css, @../css/grading-styles.css">
    
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>
    
    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="Danh sÃ¡ch BÃ i ná»™p" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button fx:id="refreshButton" text="â†» LÃ m má»›i" styleClass="secondary-button" 
                onAction="#handleRefresh"/>
        <Button fx:id="exportButton" text="ðŸ“¤ Xuáº¥t Excel" styleClass="secondary-button"
                onAction="#handleExport"/>
    </HBox>
    
    <!-- Filters Section -->
    <HBox spacing="10" alignment="CENTER_LEFT" styleClass="filter-bar">
        <Label text="Bá»™ lá»c:"/>
        
        <!-- Exam Filter -->
        <VBox spacing="3">
            <Label text="Äá» thi" styleClass="filter-label"/>
            <ComboBox fx:id="examFilter" promptText="Táº¥t cáº£ Ä‘á» thi" prefWidth="200"/>
        </VBox>
        
        <!-- Status Filter -->
        <VBox spacing="3">
            <Label text="Tráº¡ng thÃ¡i" styleClass="filter-label"/>
            <ComboBox fx:id="statusFilter" promptText="Táº¥t cáº£" prefWidth="150"
                     onAction="#handleFilterChange"/>
        </VBox>
    </HBox>
    
    <!-- Statistics Bar -->
    <HBox spacing="20" alignment="CENTER_LEFT" styleClass="stats-bar">
        <Label fx:id="totalSubmissionsLabel" text="Tá»•ng sá»‘: 0" styleClass="stat-label"/>
        <Separator orientation="VERTICAL"/>
        <Label fx:id="averageScoreLabel" text="Äiá»ƒm TB: -" styleClass="stat-label"/>
        <Separator orientation="VERTICAL"/>
        <Label fx:id="passRateLabel" text="Tá»· lá»‡ Ä‘áº¡t: -" styleClass="stat-label"/>
        <Separator orientation="VERTICAL"/>
        <Label fx:id="pendingCountLabel" text="Chá» cháº¥m: 0" styleClass="stat-label"/>
    </HBox>
    
    <!-- Table View with Loading Overlay -->
    <StackPane VBox.vgrow="ALWAYS">
        <TableView fx:id="submissionsTable" styleClass="data-table">
            <columns>
                <TableColumn fx:id="studentColumn" text="Há»c sinh" prefWidth="200"/>
                <TableColumn fx:id="examColumn" text="Äá» thi" prefWidth="250"/>
                <TableColumn fx:id="scoreColumn" text="Äiá»ƒm" prefWidth="120"/>
                <TableColumn fx:id="statusColumn" text="Tráº¡ng thÃ¡i" prefWidth="120"/>
                <TableColumn fx:id="submitTimeColumn" text="Thá»i gian ná»™p" prefWidth="150"/>
                <TableColumn fx:id="progressColumn" text="Tiáº¿n Ä‘á»™" prefWidth="100"/>
            </columns>
        </TableView>
        
        <!-- Loading Overlay -->
        <StackPane fx:id="loadingPane" visible="false" styleClass="loading-overlay">
            <VBox alignment="CENTER" spacing="10">
                <ProgressIndicator styleClass="loading-spinner"/>
                <Label fx:id="loadingMessage" text="Äang táº£i..." styleClass="loading-message"/>
            </VBox>
        </StackPane>
    </StackPane>
</VBox>

