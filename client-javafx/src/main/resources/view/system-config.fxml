<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17" 
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.mstrust.client.admin.controller.SystemConfigController"
      spacing="15" styleClass="content-container"
      stylesheets="@../css/admin-styles.css, @../css/teacher-styles.css">
    
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>
    
    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="âš™ï¸ Cáº¥u hÃ¬nh Há»‡ thá»‘ng" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button fx:id="saveButton" text="ðŸ’¾ LÆ°u Táº¥t cáº£" styleClass="primary-button" 
                onAction="#handleSaveAll"/>
        <Button fx:id="refreshButton" text="â†» LÃ m má»›i" styleClass="secondary-button" 
                onAction="#handleRefresh"/>
    </HBox>
    
    <!-- TabPane vá»›i 5 tabs -->
    <TabPane fx:id="configTabPane" VBox.vgrow="ALWAYS" tabClosingPolicy="UNAVAILABLE">
        
        <!-- Monitoring Settings Tab -->
        <Tab text="ðŸ“Š GiÃ¡m sÃ¡t" closable="false">
            <ScrollPane fitToWidth="true" fitToHeight="true">
                <VBox spacing="15" styleClass="config-tab-content">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    
                    <Label text="Cáº¥u hÃ¬nh GiÃ¡m sÃ¡t" styleClass="section-title"/>
                    <Separator/>
                    
                    <!-- Screenshot Settings -->
                    <VBox spacing="10">
                        <Label text="CÃ i Ä‘áº·t Screenshot" styleClass="subsection-title"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Khoáº£ng thá»i gian chá»¥p (giÃ¢y):" prefWidth="250"/>
                            <Spinner fx:id="screenshotIntervalSpinner" prefWidth="100" editable="true"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Cháº¥t lÆ°á»£ng JPEG (0.0-1.0):" prefWidth="250"/>
                            <Spinner fx:id="screenshotQualitySpinner" prefWidth="100" editable="true"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Äá»™ phÃ¢n giáº£i tá»‘i Ä‘a (Width):" prefWidth="250"/>
                            <TextField fx:id="screenshotMaxWidthField" prefWidth="100" text="1920"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Äá»™ phÃ¢n giáº£i tá»‘i Ä‘a (Height):" prefWidth="250"/>
                            <TextField fx:id="screenshotMaxHeightField" prefWidth="100" text="1080"/>
                        </HBox>
                    </VBox>
                    
                    <Separator/>
                    
                    <!-- Monitor Enable/Disable -->
                    <VBox spacing="10">
                        <Label text="Báº­t/Táº¯t Monitors" styleClass="subsection-title"/>
                        
                        <CheckBox fx:id="enableScreenCaptureCheck" text="Báº­t Screen Capture Monitor" selected="true"/>
                        <CheckBox fx:id="enableWindowFocusCheck" text="Báº­t Window Focus Monitor" selected="true"/>
                        <CheckBox fx:id="enableProcessCheck" text="Báº­t Process Monitor" selected="true"/>
                        <CheckBox fx:id="enableClipboardCheck" text="Báº­t Clipboard Monitor" selected="true"/>
                        <CheckBox fx:id="enableKeystrokeCheck" text="Báº­t Keystroke Analyzer" selected="true"/>
                    </VBox>
                    
                    <Separator/>
                    
                    <!-- Process Blacklist -->
                    <VBox spacing="10">
                        <Label text="Process Blacklist" styleClass="subsection-title"/>
                        <TextArea fx:id="processBlacklistArea" prefRowCount="10" 
                                 promptText="Má»—i dÃ²ng má»™t process name (VD: chrome.exe, notepad.exe)"/>
                    </VBox>
                    
                    <Separator/>
                    
                    <!-- Alert Thresholds -->
                    <VBox spacing="10">
                        <Label text="NgÆ°á»¡ng Cáº£nh bÃ¡o" styleClass="subsection-title"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Window Switch Threshold:" prefWidth="250"/>
                            <TextField fx:id="windowSwitchThresholdField" prefWidth="100" text="10"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Clipboard Threshold:" prefWidth="250"/>
                            <TextField fx:id="clipboardThresholdField" prefWidth="100" text="20"/>
                        </HBox>
                    </VBox>
                </VBox>
            </ScrollPane>
        </Tab>
        
        <!-- Exam Settings Tab -->
        <Tab text="ðŸ“ Äá» thi" closable="false">
            <ScrollPane fitToWidth="true" fitToHeight="true">
                <VBox spacing="15" styleClass="config-tab-content">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    
                    <Label text="Cáº¥u hÃ¬nh Äá» thi" styleClass="section-title"/>
                    <Separator/>
                    
                    <VBox spacing="10">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Thá»i gian máº·c Ä‘á»‹nh (phÃºt):" prefWidth="250"/>
                            <TextField fx:id="defaultDurationField" prefWidth="100" text="60"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Sá»‘ láº§n lÃ m bÃ i tá»‘i Ä‘a:" prefWidth="250"/>
                            <TextField fx:id="defaultMaxAttemptsField" prefWidth="100" text="1"/>
                        </HBox>
                        
                        <Separator/>
                        
                        <Label text="Quy táº¯c Cháº¥m tá»± Ä‘á»™ng" styleClass="subsection-title"/>
                        <CheckBox fx:id="autoGradeMultipleChoiceCheck" text="Tá»± Ä‘á»™ng cháº¥m Multiple Choice" selected="true"/>
                        <CheckBox fx:id="autoGradeTrueFalseCheck" text="Tá»± Ä‘á»™ng cháº¥m True/False" selected="true"/>
                        <CheckBox fx:id="autoGradeMultipleSelectCheck" text="Tá»± Ä‘á»™ng cháº¥m Multiple Select" selected="true"/>
                        <CheckBox fx:id="autoGradeFillInBlankCheck" text="Tá»± Ä‘á»™ng cháº¥m Fill in Blank" selected="true"/>
                        <CheckBox fx:id="autoGradeMatchingCheck" text="Tá»± Ä‘á»™ng cháº¥m Matching" selected="true"/>
                    </VBox>
                </VBox>
            </ScrollPane>
        </Tab>
        
        <!-- Email Settings Tab -->
        <Tab text="ðŸ“§ Email" closable="false">
            <ScrollPane fitToWidth="true" fitToHeight="true">
                <VBox spacing="15" styleClass="config-tab-content">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    
                    <Label text="Cáº¥u hÃ¬nh Email" styleClass="section-title"/>
                    <Separator/>
                    
                    <VBox spacing="10">
                        <Label text="SMTP Configuration" styleClass="subsection-title"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="SMTP Host:" prefWidth="150"/>
                            <TextField fx:id="smtpHostField" prefWidth="300" text="smtp.gmail.com"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="SMTP Port:" prefWidth="150"/>
                            <TextField fx:id="smtpPortField" prefWidth="100" text="587"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Username:" prefWidth="150"/>
                            <TextField fx:id="smtpUsernameField" prefWidth="300"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Password:" prefWidth="150"/>
                            <PasswordField fx:id="smtpPasswordField" prefWidth="300"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="From Email:" prefWidth="150"/>
                            <TextField fx:id="smtpFromEmailField" prefWidth="300"/>
                        </HBox>
                        
                        <CheckBox fx:id="smtpUseTlsCheck" text="Sá»­ dá»¥ng TLS" selected="true"/>
                        
                        <Separator/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button text="ðŸ“§ Test Email" styleClass="secondary-button" 
                                    onAction="#handleTestEmail"/>
                            <TextField fx:id="testEmailField" promptText="Email Ä‘á»ƒ test..." prefWidth="250"/>
                        </HBox>
                    </VBox>
                </VBox>
            </ScrollPane>
        </Tab>
        
        <!-- Security Settings Tab -->
        <Tab text="ðŸ”’ Báº£o máº­t" closable="false">
            <ScrollPane fitToWidth="true" fitToHeight="true">
                <VBox spacing="15" styleClass="config-tab-content">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    
                    <Label text="Cáº¥u hÃ¬nh Báº£o máº­t" styleClass="section-title"/>
                    <Separator/>
                    
                    <VBox spacing="10">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="JWT Expiration (giá»):" prefWidth="250"/>
                            <TextField fx:id="jwtExpirationField" prefWidth="100" text="24"/>
                        </HBox>
                        
                        <Separator/>
                        
                        <Label text="Password Policy" styleClass="subsection-title"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Äá»™ dÃ i tá»‘i thiá»ƒu:" prefWidth="250"/>
                            <TextField fx:id="passwordMinLengthField" prefWidth="100" text="8"/>
                        </HBox>
                        
                        <CheckBox fx:id="passwordRequireUppercaseCheck" text="YÃªu cáº§u chá»¯ hoa" selected="true"/>
                        <CheckBox fx:id="passwordRequireLowercaseCheck" text="YÃªu cáº§u chá»¯ thÆ°á»ng" selected="true"/>
                        <CheckBox fx:id="passwordRequireNumberCheck" text="YÃªu cáº§u sá»‘" selected="true"/>
                        <CheckBox fx:id="passwordRequireSpecialCheck" text="YÃªu cáº§u kÃ½ tá»± Ä‘áº·c biá»‡t" selected="false"/>
                        
                        <Separator/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Session Timeout (phÃºt):" prefWidth="250"/>
                            <TextField fx:id="sessionTimeoutField" prefWidth="100" text="30"/>
                        </HBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Sá»‘ láº§n Ä‘Äƒng nháº­p sai tá»‘i Ä‘a:" prefWidth="250"/>
                            <TextField fx:id="maxLoginAttemptsField" prefWidth="100" text="5"/>
                        </HBox>
                    </VBox>
                </VBox>
            </ScrollPane>
        </Tab>
        
        <!-- Maintenance Tab -->
        <Tab text="ðŸ”§ Báº£o trÃ¬" closable="false">
            <ScrollPane fitToWidth="true" fitToHeight="true">
                <VBox spacing="15" styleClass="config-tab-content">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>
                    
                    <Label text="Báº£o trÃ¬ Há»‡ thá»‘ng" styleClass="section-title"/>
                    <Separator/>
                    
                    <VBox spacing="15">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Maintenance Mode:" prefWidth="200"/>
                            <ToggleButton fx:id="maintenanceModeToggle" text="Táº¯t" 
                                         onAction="#handleMaintenanceModeToggle"/>
                            <Label fx:id="maintenanceModeLabel" text="Há»‡ thá»‘ng Ä‘ang hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng"/>
                        </HBox>
                        
                        <Separator/>
                        
                        <VBox spacing="10">
                            <Label text="Backup &amp; Restore" styleClass="subsection-title"/>
                            <HBox spacing="10">
                                <Button text="ðŸ’¾ Táº¡o Backup" styleClass="primary-button" 
                                       onAction="#handleCreateBackup"/>
                                <Button text="ðŸ“¥ Restore tá»« Backup" styleClass="secondary-button" 
                                       onAction="#handleRestoreBackup"/>
                            </HBox>
                        </VBox>
                        
                        <Separator/>
                        
                        <VBox spacing="10">
                            <Label text="Cache &amp; Logs" styleClass="subsection-title"/>
                            <HBox spacing="10">
                                <Button text="ðŸ—‘ï¸ XÃ³a Cache" styleClass="secondary-button" 
                                       onAction="#handleClearCache"/>
                                <Button text="ðŸ“„ Xem Logs" styleClass="secondary-button" 
                                       onAction="#handleViewLogs"/>
                            </HBox>
                        </VBox>
                        
                        <Separator/>
                        
                        <VBox spacing="10">
                            <Label text="System Information" styleClass="subsection-title"/>
                            <TextArea fx:id="systemInfoArea" prefRowCount="10" editable="false" 
                                     styleClass="system-info-text"/>
                        </VBox>
                    </VBox>
                </VBox>
            </ScrollPane>
        </Tab>
        
    </TabPane>
    
</VBox>

