<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.mstrust.client.teacher.controller.QuestionEditDialogController"
            styleClass="content-container"
            prefWidth="900" prefHeight="750">
    
    <!-- Header -->
    <top>
        <VBox styleClass="dialog-header">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            <Label fx:id="dialogTitle" styleClass="page-title" text="Táº¡o cÃ¢u há»i má»›i"/>
        </VBox>
    </top>
    
    <!-- Content vá»›i ScrollPane -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="dialog-content">
            <VBox spacing="20">
                <padding>
                    <Insets top="20" right="20" bottom="20" left="20"/>
                </padding>
                
                <!-- Common Fields Section -->
                <VBox spacing="15" styleClass="form-section">
                    <Label text="ThÃ´ng tin chung" styleClass="section-title"/>
                    
                    <!-- Subject Selection -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="MÃ´n há»c:" minWidth="120" styleClass="form-label"/>
                        <ComboBox fx:id="subjectCombo" promptText="-- Chá»n mÃ´n há»c --" 
                                  styleClass="combo-box" prefWidth="300"/>
                        <Label text="*" styleClass="required-mark"/>
                    </HBox>
                    
                    <!-- Question Type Selection -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Loáº¡i cÃ¢u há»i:" minWidth="120" styleClass="form-label"/>
                        <ComboBox fx:id="questionTypeCombo" promptText="-- Chá»n loáº¡i cÃ¢u há»i --" 
                                  styleClass="combo-box" prefWidth="300"
                                  onAction="#onQuestionTypeChange"/>
                        <Label text="*" styleClass="required-mark"/>
                    </HBox>
                    
                    <!-- Difficulty Selection -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Äá»™ khÃ³:" minWidth="120" styleClass="form-label"/>
                        <ComboBox fx:id="difficultyCombo" promptText="-- Chá»n Ä‘á»™ khÃ³ --" 
                                  styleClass="combo-box" prefWidth="300"/>
                        <Label text="*" styleClass="required-mark"/>
                    </HBox>
                    
                    <!-- Tags Input -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Tags:" minWidth="120" styleClass="form-label"/>
                        <TextField fx:id="tagsField" promptText="VÃ­ dá»¥: java, oop, inheritance" 
                                   styleClass="form-field" prefWidth="500"/>
                        <Label text="(PhÃ¢n cÃ¡ch báº±ng dáº¥u pháº©y)" styleClass="hint-text"/>
                    </HBox>
                    
                    <!-- Question Content -->
                    <VBox spacing="5">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Ná»™i dung cÃ¢u há»i:" styleClass="form-label"/>
                            <Label text="*" styleClass="required-mark"/>
                        </HBox>
                        <TextArea fx:id="questionTextArea" promptText="Nháº­p ná»™i dung cÃ¢u há»i..." 
                                  styleClass="form-field" prefHeight="150" wrapText="true"/>
                    </VBox>
                </VBox>
                
                <!-- Multiple Choice / Multiple Select Section -->
                <VBox fx:id="multipleChoiceSection" spacing="15" styleClass="form-section" 
                      managed="false" visible="false">
                    <Label text="Lá»±a chá»n tráº£ lá»i" styleClass="section-title"/>
                    
                    <VBox spacing="10">
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Danh sÃ¡ch lá»±a chá»n:" styleClass="form-label"/>
                            <Button text="+ ThÃªm" onAction="#handleAddOption" 
                                    styleClass="secondary-button"/>
                        </HBox>
                        
                        <ListView fx:id="optionsListView" prefHeight="200" styleClass="options-list"/>
                        
                        <HBox spacing="10">
                            <Button text="XÃ³a lá»±a chá»n" onAction="#handleRemoveOption" 
                                    styleClass="secondary-button"/>
                            <Button text="Sá»­a lá»±a chá»n" onAction="#handleEditOption" 
                                    styleClass="secondary-button"/>
                        </HBox>
                        
                        <Label text="ÄÃ¡p Ã¡n Ä‘Ãºng:" styleClass="form-label"/>
                        <VBox fx:id="correctAnswerContainer" spacing="5">
                            <!-- Radio buttons hoáº·c CheckBoxes sáº½ Ä‘Æ°á»£c thÃªm Ä‘á»™ng -->
                        </VBox>
                    </VBox>
                </VBox>
                
                <!-- True/False Section -->
                <VBox fx:id="trueFalseSection" spacing="15" styleClass="form-section" 
                      managed="false" visible="false">
                    <Label text="ÄÃ¡p Ã¡n ÄÃºng/Sai" styleClass="section-title"/>
                    
                    <VBox spacing="10">
                        <Label text="Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng:" styleClass="form-label"/>
                        <RadioButton fx:id="trueRadio" text="ÄÃºng" toggleGroup="$trueFalseGroup"/>
                        <RadioButton fx:id="falseRadio" text="Sai" toggleGroup="$trueFalseGroup"/>
                    </VBox>
                </VBox>
                
                <!-- Essay Section -->
                <VBox fx:id="essaySection" spacing="15" styleClass="form-section" 
                      managed="false" visible="false">
                    <Label text="Cáº¥u hÃ¬nh cÃ¢u tá»± luáº­n" styleClass="section-title"/>
                    
                    <HBox spacing="20">
                        <VBox spacing="5">
                            <Label text="Sá»‘ tá»« tá»‘i thiá»ƒu:" styleClass="form-label"/>
                            <TextField fx:id="minWordsField" promptText="VÃ­ dá»¥: 100" 
                                       styleClass="form-field" prefWidth="150"/>
                        </VBox>
                        
                        <VBox spacing="5">
                            <Label text="Sá»‘ tá»« tá»‘i Ä‘a:" styleClass="form-label"/>
                            <TextField fx:id="maxWordsField" promptText="VÃ­ dá»¥: 500" 
                                       styleClass="form-field" prefWidth="150"/>
                        </VBox>
                    </HBox>
                    
                    <VBox spacing="5">
                        <Label text="TiÃªu chÃ­ cháº¥m Ä‘iá»ƒm:" styleClass="form-label"/>
                        <TextArea fx:id="gradingCriteriaArea" 
                                  promptText="Nháº­p tiÃªu chÃ­ cháº¥m Ä‘iá»ƒm cho cÃ¢u tá»± luáº­n..." 
                                  styleClass="form-field" prefHeight="100" wrapText="true"/>
                    </VBox>
                </VBox>
                
                <!-- Short Answer Section -->
                <VBox fx:id="shortAnswerSection" spacing="15" styleClass="form-section" 
                      managed="false" visible="false">
                    <Label text="CÃ¢u tráº£ lá»i ngáº¯n" styleClass="section-title"/>
                    
                    <VBox spacing="5">
                        <Label text="ÄÃ¡p Ã¡n máº«u:" styleClass="form-label"/>
                        <TextField fx:id="shortAnswerField" 
                                   promptText="Nháº­p Ä‘Ã¡p Ã¡n máº«u (dÃ¹ng cho tham kháº£o)" 
                                   styleClass="form-field"/>
                    </VBox>
                    
                    <VBox spacing="5">
                        <Label text="HÆ°á»›ng dáº«n cháº¥m:" styleClass="form-label"/>
                        <TextArea fx:id="shortAnswerGradingArea" 
                                  promptText="HÆ°á»›ng dáº«n cÃ¡ch cháº¥m Ä‘iá»ƒm cho cÃ¢u tráº£ lá»i ngáº¯n..." 
                                  styleClass="form-field" prefHeight="80" wrapText="true"/>
                    </VBox>
                </VBox>
                
                <!-- Coding Section -->
                <VBox fx:id="codingSection" spacing="15" styleClass="form-section" 
                      managed="false" visible="false">
                    <Label text="Cáº¥u hÃ¬nh cÃ¢u láº­p trÃ¬nh" styleClass="section-title"/>
                    
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="NgÃ´n ngá»¯:" minWidth="120" styleClass="form-label"/>
                        <ComboBox fx:id="programmingLanguageCombo" 
                                  promptText="-- Chá»n ngÃ´n ngá»¯ --" 
                                  styleClass="combo-box" prefWidth="200"/>
                    </HBox>
                    
                    <VBox spacing="5">
                        <Label text="Code khá»Ÿi táº¡o (template):" styleClass="form-label"/>
                        <TextArea fx:id="starterCodeArea" 
                                  promptText="Nháº­p code template cho sinh viÃªn..." 
                                  styleClass="form-field code-area" prefHeight="150" 
                                  style="-fx-font-family: 'Consolas', monospace;"/>
                    </VBox>
                    
                    <VBox spacing="5">
                        <Label text="Test cases (JSON format):" styleClass="form-label"/>
                        <TextArea fx:id="testCasesArea" 
                                  promptText='[{"input": "...", "expectedOutput": "..."}]' 
                                  styleClass="form-field code-area" prefHeight="120" 
                                  style="-fx-font-family: 'Consolas', monospace;"/>
                    </VBox>
                    
                    <HBox spacing="20">
                        <VBox spacing="5">
                            <Label text="Thá»i gian (giÃ¢y):" styleClass="form-label"/>
                            <TextField fx:id="timeLimitField" promptText="VÃ­ dá»¥: 5" 
                                       styleClass="form-field" prefWidth="120"/>
                        </VBox>
                        
                        <VBox spacing="5">
                            <Label text="Bá»™ nhá»› (MB):" styleClass="form-label"/>
                            <TextField fx:id="memoryLimitField" promptText="VÃ­ dá»¥: 128" 
                                       styleClass="form-field" prefWidth="120"/>
                        </VBox>
                    </HBox>
                </VBox>
                
                <!-- Fill in Blank Section -->
                <VBox fx:id="fillInBlankSection" spacing="15" styleClass="form-section" 
                      managed="false" visible="false">
                    <Label text="Äiá»n khuyáº¿t" styleClass="section-title"/>
                    
                    <VBox spacing="5">
                        <Label styleClass="form-label">
                            <text>HÆ°á»›ng dáº«n: Sá»­ dá»¥ng _____ Ä‘á»ƒ Ä‘Ã¡nh dáº¥u chá»— trá»‘ng</text>
                        </Label>
                        <TextArea fx:id="fillInBlankTextArea" 
                                  promptText="VÃ­ dá»¥: Java lÃ  ngÃ´n ngá»¯ _____ vÃ  _____" 
                                  styleClass="form-field" prefHeight="100" wrapText="true"/>
                    </VBox>
                    
                    <VBox spacing="5">
                        <Label text="ÄÃ¡p Ã¡n cho cÃ¡c chá»— trá»‘ng (JSON array):" styleClass="form-label"/>
                        <TextArea fx:id="blankAnswersArea" 
                                  promptText='["hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng", "Ä‘a ná»n táº£ng"]' 
                                  styleClass="form-field code-area" prefHeight="80" 
                                  style="-fx-font-family: 'Consolas', monospace;"/>
                    </VBox>
                </VBox>
                
                <!-- Matching Section -->
                <VBox fx:id="matchingSection" spacing="15" styleClass="form-section" 
                      managed="false" visible="false">
                    <Label text="Ná»‘i cáº·p" styleClass="section-title"/>
                    
                    <HBox spacing="20">
                        <VBox spacing="10" HBox.hgrow="ALWAYS">
                            <Label text="Cá»™t bÃªn trÃ¡i:" styleClass="form-label"/>
                            <ListView fx:id="leftItemsListView" prefHeight="180" 
                                      styleClass="options-list"/>
                            <HBox spacing="10">
                                <Button text="+ ThÃªm" onAction="#handleAddLeftItem" 
                                        styleClass="secondary-button"/>
                                <Button text="- XÃ³a" onAction="#handleRemoveLeftItem" 
                                        styleClass="secondary-button"/>
                            </HBox>
                        </VBox>
                        
                        <VBox spacing="10" HBox.hgrow="ALWAYS">
                            <Label text="Cá»™t bÃªn pháº£i:" styleClass="form-label"/>
                            <ListView fx:id="rightItemsListView" prefHeight="180" 
                                      styleClass="options-list"/>
                            <HBox spacing="10">
                                <Button text="+ ThÃªm" onAction="#handleAddRightItem" 
                                        styleClass="secondary-button"/>
                                <Button text="- XÃ³a" onAction="#handleRemoveRightItem" 
                                        styleClass="secondary-button"/>
                            </HBox>
                        </VBox>
                    </HBox>
                    
                    <VBox spacing="5">
                        <Label text="Cáº·p Ä‘Ãºng (JSON format):" styleClass="form-label"/>
                        <TextArea fx:id="correctMatchesArea" 
                                  promptText='[{"left": 0, "right": 0}, {"left": 1, "right": 1}]' 
                                  styleClass="form-field code-area" prefHeight="80" 
                                  style="-fx-font-family: 'Consolas', monospace;"/>
                        <Label text="LÆ°u Ã½: Sá»­ dá»¥ng index (báº¯t Ä‘áº§u tá»« 0) cá»§a items" 
                               styleClass="hint-text"/>
                    </VBox>
                </VBox>
                
                <!-- Attachments Section -->
                <VBox spacing="15" styleClass="form-section">
                    <Label text="Tá»‡p Ä‘Ã­nh kÃ¨m" styleClass="section-title"/>
                    
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Button text="ðŸ“Ž Chá»n tá»‡p" onAction="#handleSelectAttachment" 
                                styleClass="secondary-button"/>
                        <Label fx:id="attachmentLabel" text="ChÆ°a cÃ³ tá»‡p Ä‘Ã­nh kÃ¨m" 
                               styleClass="hint-text"/>
                    </HBox>
                    
                    <ListView fx:id="attachmentsListView" prefHeight="80" 
                              styleClass="options-list" managed="false" visible="false"/>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>
    
    <!-- Action Buttons -->
    <bottom>
        <HBox spacing="10" alignment="CENTER_RIGHT" styleClass="dialog-footer">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <Button text="Há»§y" onAction="#handleCancel" styleClass="secondary-button" 
                    prefWidth="100"/>
            <Button fx:id="saveButton" text="LÆ°u" onAction="#handleSave" 
                    styleClass="primary-button" prefWidth="100"/>
        </HBox>
    </bottom>
</BorderPane>
