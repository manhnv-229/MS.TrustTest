# PHASE 9.2 - Stage 5: Wizard Data Flow Debug Test Guide

## üéØ Objective
Debug v√† identify ch√≠nh x√°c **where time data is lost** trong wizard flow v·ªõi comprehensive debug logging t·ª´ 3 ƒëi·ªÉm quan tr·ªçng. 

## üö® Current Status
- ‚úÖ Debug logging added to **3 critical points**
- ‚úÖ Build successful - project ready for testing
- ‚ùå **CONFIRMED**: All data NULL in Step 4 (Title, Start Time, End Time, etc.)

## üîç Debug Points Setup

### 1. **Step 1 Controller** - After form validation
Location: `Step1BasicInfoController.handleNext()`
```
=== STEP 1 DEBUG: handleNext() ===
Title: [exam title]
Start Time: [should show datetime]
End Time: [should show datetime]
Subject Class Name: [subject name]
Exam Purpose: [purpose]
Exam Format: [format]
===================================
```

### 2. **Parent Wizard Controller** - Before loading next step  
Location: `ExamCreationWizardController.nextStep()`
```
=== WIZARD DEBUG: nextStep() from [current step] ===
Title: [should preserve from step 1]
Start Time: [should preserve from step 1]
End Time: [should preserve from step 1]
Subject Class Name: [should preserve from step 1]
=========================================
```

### 3.  **Step 4 Controller** - When receiving data
Location: `Step4ClassAssignmentController.setWizardData()`
```
=== STEP 4 DEBUG: setWizardData() ===
Title: [currently NULL - should NOT be NULL]
Start Time: [currently NULL - should NOT be NULL] 
End Time: [currently NULL - should NOT be NULL]
Subject Class Name: [currently NULL - should NOT be NULL]
=====================================
```

## üß™ Enhanced Testing Instructions

### **Test Sequence**
```bash
# 1. Run JavaFX Client
cd client-javafx
mvn javafx:run

# 2. Login as Teacher ‚Üí Open Exam Creation Wizard
```

### **Step-by-Step Data Flow Testing**

#### **Step 1 Testing**:
1. Fill form completely:
   - **Title**: "Debug Test Exam"
   - **Description**: "Testing data flow"
   - **Subject Class**: Select any option
   - **Purpose**: Select any exam purpose
   - **Format**: Select any format
   - **Start Time**: Set DatePicker + Spinners (e.g., tomorrow 08:00)
   - **End Time**: Set DatePicker + Spinners (e.g., tomorrow 10:00)

2. Click **"Next"**

3. **CHECK CONSOLE** for:
   ```
   === STEP 1 DEBUG: handleNext() ===
   Title: Debug Test Exam
   Start Time: 2025-11-30T08:00
   End Time: 2025-11-30T10:00  
   Subject Class Name: [selected subject]
   Exam Purpose: [selected purpose]
   Exam Format: [selected format]
   ===================================
   ```

4. **IMMEDIATELY AFTER** Step 1 debug, check for:
   ```
   === WIZARD DEBUG: nextStep() from 1 ===
   Title: Debug Test Exam  ‚Üê Should match Step 1
   Start Time: 2025-11-30T08:00  ‚Üê Should match Step 1
   End Time: 2025-11-30T10:00  ‚Üê Should match Step 1
   Subject Class Name: [selected subject]  ‚Üê Should match Step 1
   =========================================
   ```

#### **Step 2 & 3 Navigation**:
- Navigate through Step 2 (Questions) and Step 3 (Settings)  
- Each navigation should show **WIZARD DEBUG** output
- **KEY**: Check if data is preserved in parent controller

#### **Step 4 Testing**:
- When Step 4 loads, check console for:
   ```
   === STEP 4 DEBUG: setWizardData() ===
   Title: Debug Test Exam  ‚Üê Should NOT be NULL
   Start Time: 2025-11-30T08:00  ‚Üê Should NOT be NULL
   End Time: 2025-11-30T10:00  ‚Üê Should NOT be NULL
   Subject Class Name: [selected subject]  ‚Üê Should NOT be NULL
   =====================================
   ```

## üéØ Expected Debug Analysis Scenarios

### **Scenario A**: Data Preserved in Parent, Lost in Step 4
**Console Output**:
```
STEP 1 DEBUG: ‚úÖ Data OK
WIZARD DEBUG: ‚úÖ Data OK  
STEP 4 DEBUG: ‚ùå Data NULL
```
**Conclusion**: Issue in `loadStep4()` method - wizardData not passed correctly

### **Scenario B**: Data Lost in Parent Controller
**Console Output**:
```
STEP 1 DEBUG: ‚úÖ Data OK
WIZARD DEBUG: ‚ùå Data NULL
STEP 4 DEBUG: ‚ùå Data NULL  
```
**Conclusion**: Issue in parent controller - wizardData reference broken

### **Scenario C**: Data Not Saved in Step 1
**Console Output**:
```
STEP 1 DEBUG: ‚ùå Data NULL or partial
WIZARD DEBUG: ‚ùå Data NULL
STEP 4 DEBUG: ‚ùå Data NULL
```
**Conclusion**: Issue in Step 1 form saving logic

## üîß Potential Root Causes Based on Code Analysis

### **Hypothesis 1**: Reference Issue
`wizardData` object reference ƒë∆∞·ª£c pass by reference, nh∆∞ng c√≥ th·ªÉ b·ªã reassign ho·∫∑c corrupted somewhere. 

### **Hypothesis 2**: New Object Creation
M·ªói `loadStepX()` c√≥ th·ªÉ accidentally t·∫°o new `ExamWizardData` instance thay v√¨ reuse existing. 

### **Hypothesis 3**: Form Saving Logic
`Step1BasicInfoController.saveFormToData()` c√≥ issue v·ªõi DatePicker + Spinner data extraction.

## üìã Next Actions Based on Debug Output

### **After Getting Console Output**:
1. **Copy to√†n b·ªô console debug output**
2. **Identify which scenario matches** (A, B, or C above)
3. **Con s·∫Ω fix based on exact issue identified**

### **If Scenario A** (Parent OK, Step 4 NULL):
- Fix `loadStep4()` method in ExamCreationWizardController
- Check `setWizardData()` call

### **If Scenario B** (Parent NULL):
- Investigate `nextStep()` method
- Check if `wizardData` reference is maintained

### **If Scenario C** (Step 1 NULL):
- Fix `saveFormToData()` method in Step1BasicInfoController
- Check DatePicker + Spinner data extraction

## üéØ Success Criteria
- [ ] Step 1 Debug shows proper data after form filling
- [ ] Wizard Debug shows preserved data in parent controller  
- [ ] Step 4 Debug shows same data (NOT NULL)
- [ ] All 3 debug points show consistent data values

---
**Status**: ‚úÖ **READY FOR COMPREHENSIVE DEBUG TESTING**  
**Action Required**: C·ª• ch·∫°y test theo sequence tr√™n v√† copy console output  
**Estimated Time**: 10-15 minutes testing + analysis

---
*Created: 29/11/2025 14:58*  
*By: K24DTCN210-NVMANH*
